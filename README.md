# Финальный проект

# Как запустить бота?

1. Добавить необходимые переменные окружения в файл .env
2. В файле misc/constants.py указать id группы
3. Запустить бота командой 'docker-compose up'

# Что нужно знать?

Как разработать код бота  
Как использовать сервер  
Как использовать Docker  
Как использовать базы данных SQL  
Как использовать встроенные кнопки  
Как использовать валидацию ввода  
Основы систем реферального вознаграждения


# Задание:

1. Я, как админ, должен со своего аккаунта иметь возможность добавлять новые товары. У товаров будут фотография, название, описание, цена. Способ покупки - на твое усмотрение, будь то киви, биткоин или еще что-то.

2. По реферальной системе я хочу, чтобы новый пользователь мог быть добавлен по ссылке-инвайту. То есть, новому пользователю обязательно нужно быть приглашенным от кого-то, иначе бот для него будет недоступен. Если пришел без инвайта - бот говорит, "Чтобы использовать этого бота введите код приглашения, либо пройдите по реферальной ссылке". Нужно еще предусмотреть возможность ручного ввода кода приглашения, если человек нажал старт не по диплинку. За каждого реферала пользователь получает 10 баллов = 10 USD, которые у него могут быть потрачены на покупку товара.

3. Если человек пришел без приглашения, то пусть он хотя бы подпишется на ваш канал (создайте его сами), и тогда ему откроется доступ. В качестве реферального айди (если у вас такой будет) можно поставить айди канала.

4. При нажатии команды старт (или после регистрации пользователя) отдай инлайн кнопки, по которым будет описано, что умеет бот (основные функции бота): например, можно будет по ним зайти в реферальную систему, или админку (если пользователь админ), или что-то еще. Тут прошу проявить фантазию, либо не усложнять бота.

5. Я хочу, чтобы можно было искать товары только с помощью инлайн мода. чтобы в нем выводилась превьюшка фото, название товара и его цена. Почему инлайн мод? Не хочу, чтобы приходилось тыкать на миллион кнопок перед тем как найти товар, только инлайн мод. Суть такая: вводишь первые 2 буквы и он уже ищет совпадения по названию или описанию (подсказка, используй запрос к SQL базе со словом ILIKE). При этом, если пользователь ничего не ввел в инлайн моде - выдавать ему список товаров отсортированных в алфавитном порядке (название товара).

6. По нажатию на инлайн кнопку главного меню "Выбрать товар" должен открыться инлайн режим с пустым вводом, чтобы отображались те самые товары.

7. После выбора товара, я хочу чтобы была инлайн кнопка "Показать товар", в которой будет спрятана ссылка на бота, где будут передаваться параметры выбранного товара. То есть, по нажатию на эту кнопку, покупатель переходит в бота и жмет команду "/start" и бот ему сразу выдает полную информацию о товаре, а под ним будет кнопка "Купить", по нажатию на которую бот предлагает ввести количество товара, адрес доставки и предлагает пользователю оплатить. Способ оплаты - на ваш выбор. Можно использовать те, что были показаны в курсе, можно и любой другой. Можно один или несколько вариантов оплаты, не принципиально.

8. Так как я немного понимаю как использовать сервер и что такое докер, но не шарю в написании ботов ничего, я хочу, чтобы ты мне подготовил код со сборкой с докером, чтобы я потом на сервере просто взял и запустил бота с базой командой docker-compose up.
UPD 26.08.20: Запусти бота на сервере и добавь меня в админы (нужно найти мой чат айди и прописать где нужно), либо дай доступ к Django админке. Бота необходимо будет протестировать  

UPD 08.04.21: Базу необходимо заполнить 6 и больше товарами.

UPD 12.07.21: Прояви фантазию! Где нужно, сделай валидацию ввода, добавь дополнительные штучки для бота на свой вкус. Например, корзину с товарами. Это уже все на твой выбор. За это дополнительных баллов (выше 100) не даю, но в случае мелких ошибок в целом по коду, за такое буду компенсировать немного баллов.
